cmake_minimum_required (VERSION 3.28)
#set(CMAKE_CXX_COMPILER g++-13)
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin/$<CONFIG>)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin/$<CONFIG>)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin/$<CONFIG>)
set(include_dir include)
set(module_dir module)
set(source_dir source)
set(libMachEmu MachEmu)

project(mach-emu)

if(CMAKE_COMPILER_IS_GNUCXX)
    set(STD_MODULES array bitset chrono cstdint filesystem functional memory string string_view thread vector)
    include(${CMAKE_SOURCE_DIR}/CMakeIncludes/stdModules.cmake)
endif()

include(${CMAKE_SOURCE_DIR}/CMakeIncludes/addTarget.cmake)

add_subdirectory(Base)
add_subdirectory(Controller)
add_subdirectory(Cpu)
add_subdirectory(CpuClock)
add_subdirectory(Machine)
add_subdirectory(SystemBus)
add_subdirectory(Tests)
add_subdirectory(Sdk)
